<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="../WEB-INF/templates/template.xhtml">
    <ui:define name="title">
        #{studentBean.student.user.firstName} #{studentBean.student.user.lastName} #{msg['profile']}
    </ui:define>

    <ui:define name="body">
        <f:metadata>
            <f:viewParam name="id" value="#{publicProfileBean.profileId}"/>
            <f:viewAction action="#{profileBean.onLoad}"/>
        </f:metadata>


        <div class="container text-center">

            <p:panelGrid columns="2" layout="grid">
                <p:outputLabel for="student-name" value="#{msg['s.name']}:" style="font-size: medium;"/>
                <h:outputText id="student-name"
                              value="#{studentBean.student.user.firstName} #{studentBean.student.user.lastName}"
                              style="font-size: medium; font-weight: bold;"/>

                <p:outputLabel for="student-name" value="#{msg['p.name']}:" style="font-size: medium;"/>
                <h:outputText id="parent-name" style="font-size: medium; font-weight: bold;"
                              value="#{studentBean.student.parent.user.firstName} #{studentBean.student.parent.user.lastName}"/>

                <p:outputLabel for="class-name" value="#{msg['class']}:" style="font-size: medium;"/>
                <h:outputText id="class-name" style="font-size: medium; font-weight: bold;"
                              value="#{studentBean.student.aclass.name} #{studentBean.student.aclass.year}"/>

            </p:panelGrid>

            <h:outputLink styleClass="open-dialog-link" value="javascript:void(0)"
                          onclick="PF('markDialog').show();"
                          style="text-decoration: none;">
                <h:panelGroup id="panel">
                    <p:dataTable id="students" var="mark"
                                 value="#{markBean.marks}"
                                 selection="#{markBean.marks}" rowKey="#{mark.id}"
                                 style="margin-bottom:0"
                                 rows="20"
                                 paginator="true"
                                 paginatorPosition="bottom"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="15, 20, 50">

                        <p:column headerText="igazolt-Ã©">
                            <h:outputText value="#{msg['note.signed.'+=mark.signed]}"/>
                        </p:column>

                        <p:column headerText="#{msg['validator.uname']}" sortBy="#{mark.student}">
                            <h:outputLink value="#{request.contextPath}/student/profile.xhtml?id=#{student.id}">
                                <h:outputText value="#{mark.student.user.name}"/>
                            </h:outputLink>
                        </p:column>

                        <p:column headerText="#{msg['fname']}" sortBy="#{mark.subject.name}">
                            <h:outputText value="#{mark.subject.name}"/>
                        </p:column>

                        <p:column headerText="#{msg['lname']}" sortBy="#{mark.teacher.user.name}">
                            <h:outputText value="#{mark.teacher.user.name}"/>
                        </p:column>

                        <p:column headerText="#{msg['lname']}" sortBy="#{mark.teacher.user.name}">
                            <h:outputText value="#{mark.value}"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
            </h:outputLink>

            <p:dialog widgetVar="markDialog" modal="true" closeOnEscape="true" header="Admin panel"
                      showEffect="fade" hideEffect="fade" minHeight="100" minWidth="100">
                <h:form>
                    <h:panelGroup id="panel2">
                        <p:dataTable id="students2" var="mark"
                                     value="#{markBean.marks}"
                                     selection="#{markBean.marks}" rowKey="#{mark.id}"
                                     style="margin-bottom:0"
                                     rows="20"
                                     paginator="true"
                                     paginatorPosition="bottom"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="15, 20, 50">
                            <p:column headerText="igazolt-Ã©">
                                <h:selectBooleanCheckbox id="jk"
                                                         value="#{mark.signed}" disabled="#{mark.signed}">
                                    <f:selectItem itemValue="#{mark.signed}"/>
                                </h:selectBooleanCheckbox>
                            </p:column>

                            <p:column headerText="#{msg['validator.uname']}" sortBy="#{mark.student}">
                                <h:outputLink value="#{request.contextPath}/student/profile.xhtml?id=#{student.id}">
                                    <h:outputText value="#{mark.student.user.name}"/>
                                </h:outputLink>
                            </p:column>

                            <p:column headerText="#{msg['fname']}" sortBy="#{mark.subject.name}">
                                <h:outputText value="#{mark.subject.name}"/>
                            </p:column>

                            <p:column headerText="#{msg['lname']}" sortBy="#{mark.teacher.user.name}">
                                <h:outputText value="#{mark.teacher.user.name}"/>
                            </p:column>

                            <p:column headerText="#{msg['lname']}" sortBy="#{mark.teacher.user.name}">
                                <h:outputText value="#{mark.value}"/>
                            </p:column>
                        </p:dataTable>
                    </h:panelGroup>
                </h:form>
            </p:dialog>

        </div>

    </ui:define>
</ui:composition>
</html>