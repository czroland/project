<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <p:selectOneRadio id="roles" value="#{roleBean.userRole}" layout="responsive" columns="5">
        <f:selectItems value="#{roleBean.roles}" var="userRole"
                       itemLabel="#{msg['role.'+=userRole.name]}" itemValue="#{userRole.name}"/>
    </p:selectOneRadio>

    <p:dataTable id="users" var="user" value="#{userBean.users.source}"
                 selection="#{userBean.users.target}" rowKey="#{user.id}"
                 style="margin-bottom:0"
                 rows="20"
                 paginator="true"
                 paginatorPosition="bottom"
                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                 rowsPerPageTemplate="15, 20, 50">>

        <p:column selectionMode="multiple" style="width:36px;text-align:center"/>

        <p:column headerText="#{msg['validator.uname']}" sortBy="#{user.name}">
            <h:outputText value="#{user.name}"/>
        </p:column>

        <p:column headerText="#{msg['admin.email']}" sortBy="#{user.email}">
            <h:outputText value="#{user.email}"/>
        </p:column>

        <p:column headerText="#{msg['roles']}">
            <h:dataTable widgetVar="kl" id="asd" var="role" value="#{user.roles}">
                <p:column>
                    <h:outputText id="as" value="#{msg['role.'+=role.name]}"/>
                </p:column>
            </h:dataTable>
        </p:column>

    </p:dataTable>

    <p:commandButton id="add-role" value="#{msg['admin.role.add']}"
                     style="margin-top:5px"
                     actionListener="#{roleMmt.addRole(userBean.users.target, roleBean.userRole)}"
                     update="@widgetVar(panel)"/>
    <p:commandButton id="remove-role" value="#{msg['admin.role.remove']}"
                     style="margin-top:5px"
                     actionListener="#{roleMmt.removeRole(userBean.users.target, roleBean.userRole)}"
                     update="@widgetVar(panel)"/>

</ui:composition>